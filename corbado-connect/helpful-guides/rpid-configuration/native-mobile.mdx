---
title: "Native/Mobile Application"
description: "Discover how to configure the RPID for your application, particularly in complex scenarios involving both web and native/mobile applications running in parallel."
sidebarTitle: "Native/Mobile Application"
---

Context:
- /corbado-complete/helpful-guides/passkeys/relying-party-id
- /corbado-complete/helpful-guides/passkeys/passkeys-in-native-apps
- https://www.corbado.com/blog/webauthn-relying-party-id-rpid-passkeys
- /local-context/flutter

## 1. Introduction

While **RPID** configuration for web applications is straightforward and based on the application's [origin](https://developer.mozilla.org/en-US/docs/Glossary/Origin), native/mobile applications present unique challenges. Unlike web browsers, native/mobile applications don't operate within the traditional concept of web [origins](https://developer.mozilla.org/en-US/docs/Glossary/Origin) and domains. This fundamental difference requires a special approach to establish trust between your domain and your native/mobile applications.

To enable passkey functionality in native environments, you need to create a secure association between your application and your domain. This is achieved through platform-specific association files:

- For **iOS** applications, this involves configuring an **AASA (Apple App Site Association)** and **entitlements** file
- For **Android** applications, you'll need to set up an **Asset Links** file

These association files serve as digital proof that your native/mobile application is authorized to use passkeys associated with your **RPID** (domain). This security measure ensures that only legitimate applications can access and manage passkeys, preventing potential security vulnerabilities.

## 2. iOS

Configuring passkey support for **iOS** applications requires careful setup of the relationship between your application and your **RPID**. This involves creating and configuring multiple components that work together to establish a secure, trusted connection.

<Note>
Before testing passkeys on physical **iOS** devices, you'll need to configure your development environment properly. For detailed instructions, refer to our [iOS Device Testing Guide](/corbado-complete/frontend-integration/flutter/run-on-physical-device/ios/overview).
</Note>

Let's explore each of these components in detail.

### 2.1. AASA and entitlements file

The trust relationship between your **iOS** application and your **RPID** is established through two key files:

- An **AASA** file hosted on your **RPID** (domain) that specifies which applications are allowed to use passkeys for this **RPID**
- An **entitlements** file in your **iOS** application that declares what **RPIDs** it wants to use for passkeys

For the next sections, we assume that the **RPID** is `example.com`.

#### 2.1.1 AASA File

The **AASA** file is a JSON configuration file [hosted](#2-3-hosting-of-aasa-file) on your **RPID** (domain):

`https://example.com/.well-known/apple-app-site-association`

Below is an example of a complete **AASA** file. The crucial section for passkeys is the `webcredentials` object, where you specify which **iOS** applications (identified by their **Application Identifier Prefix** and **Bundle ID**) are authorized to use passkeys for this **RPID**:

```json
{
  "appclips": {
    "apps": []
  },
  "applinks": {
    "details": [
      {
        "appID": "T9A667JL6T.com.example.app",
        "paths": [
          "*"
        ]
      }
    ]
  },
  "webcredentials": {
    "apps": [
      "T9A667JL6T.com.example.app"
    ]
  }
}
```

<Info>
`T9A667JL6T` is the **Application Identifier Prefix** and `com.example.app` is the **Bundle ID**, see [below](#2-2-application-identifier-prefix-and-bundle-identifier) to learn more about these identifiers.
</Info>

#### 2.1.2 Entitlements File

The **entitlements** file completes the trust circle by declaring which **RPIDs** your **iOS** application wants to access. This file must be included in your **iOS** application's project:

```xml Example.entitlements
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.developer.associated-domains</key>
    <array>
        <string>webcredentials:example.com</string>
    </array>
</dict>
</plist>
```

The relevant part here is the `webcredentials:example.com` entry. This entry tells **iOS** where to look for the **AASA** file.

#### 2.1.3 Trust Establishment Process

The following diagram illustrates how these files work together to establish trust:

<Frame caption="Trust Establishment Process">
![Trust Establishment Process](/images/corbado-connect/rpid-aasa-file.webp)
</Frame>

Here's the complete flow:

1. The **RPID** has been [configured](https://app.corbado.com/settings/general?tab=URLs) as `example.com`
2. The same **RPID** has been added to the **entitlements** file using the `webcredentials:` prefix
3. When your **iOS** application is installed or updated:
   - **iOS** reads the **entitlements** file
   - Fetches the **AASA** file from `https://example.com/.well-known/apple-app-site-association`
   - Verifies that your **iOS** application's identifiers are listed in the `webcredentials.apps` section
4. If verification succeeds, your **iOS** application is authorized to use passkeys for the specified **RPID**

<Warning>
Apple aggressively caches **AASA** files. During development, append `?mode=developer` to bypass this caching when accessing your **AASA** file.
</Warning>

### 2.2. Application Identifier Prefix and Bundle Identifier

The **AASA** file references your **iOS** application using two unique identifiers that work together to uniquely identify your application.

#### 2.2.1 Bundle Identifier

The **Bundle Identifier** (or **Bundle ID**) is a unique identifier for your **iOS** application that you configure in Xcode. It follows a reverse-domain naming pattern:

```
com.example.app
```

<Info>
Best practices for **Bundle IDs**:
- Use reverse-domain notation (e.g., `com.yourcompany.appname`)
- Only use alphanumeric characters, hyphens, and periods
- Keep it lowercase to avoid confusion
- Choose a name that will remain unique and consistent
</Info>

#### 2.2.2 Application Identifier Prefix

The **Application Identifier Prefix** (also known as **Team ID**) is a unique identifier assigned by Apple to your development team. You can find it in the Apple Developer Portal under "Membership":

<Frame caption="Team ID in Apple Developer Portal">
![Apple Developer Portal Team ID location](/images/corbado-connect/apple-team-id.webp)
</Frame>

#### 2.2.3 Combined Usage

These identifiers are combined in the **AASA** file forming a unique identifier for your **iOS** application, for example:

```
T9A667JL6T.com.example.app
```

### 2.3. Hosting the AASA file

#### 2.3.1 Development Environment

For development and testing, **Corbado Connect** provides a pre-configured **AASA** file through the Corbado Frontend API:

```
https://<ProjectID>.frontendapi.cloud.corbado.io/.well-known/apple-app-site-association
```

To use this during development:

1. Set your **RPID** to `<ProjectID>.frontendapi.cloud.corbado.io`
2. Configure your **Application Identifier Prefix** and **Bundle ID** in the [Corbado developer panel](https://app.corbado.com/pro-8081086374374980670/settings/native-apps)

<Warning>
This setup is only suitable for development. For production, you must host the **AASA** file on your own domain to match your production **RPID**.
</Warning>

#### 2.3.2 Production Environment

In production, the **AASA** file must be hosted on your domain that matches your **RPID**. For example, if your **RPID** is `example.com`, the **AASA** file must be accessible at:

```
https://example.com/.well-known/apple-app-site-association
```

You have two options for hosting the file:

<AccordionGroup>
<Accordion title="Option 1: Static File Hosting (Recommended)">
1. Download the **AASA** file from Corbado Frontend API
2. Host it on your webserver at `/.well-known/apple-app-site-association`
3. Ensure it's served with the correct content type: `application/json`

**Advantages:**
- Simple to set up
- No dependency on Corbado Frontend API
- Better performance
- Works even if Corbado Frontend API is temporarily unavailable

**Disadvantages:**
- You have to manually update the file
</Accordion>

<Accordion title="Option 2: Proxy Configuration">
Create a proxy rule on your webserver to forward requests to Corbado Frontend API:

**Nginx Example:**
```nginx
location /.well-known/apple-app-site-association {
    proxy_pass https://<ProjectID>.frontendapi.cloud.corbado.io/.well-known/apple-app-site-association;
    proxy_set_header Host $host;
    proxy_ssl_server_name on;
}
```

**Advantages:**
- Always serves the latest version
- No need to manually update the file

**Disadvantages:**
- Depends on Corbado Frontend API availability
- Slightly higher latency
- More complex configuration
</Accordion>
</AccordionGroup>

<Tip>
We recommend Option 1 (Static File Hosting) because:
- The **AASA** file rarely changes
- It provides better reliability and performance
- It's simpler to set up and maintain
</Tip>

## 3. Android

TODO