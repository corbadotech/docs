---
title: "Automatic Passkey Backup and Export to S3"
description: "TODO"
sidebarTitle: "Passkey Export"
---

import Demo from "/snippets/corbado-connect/demo.mdx"

<Demo />

## 1. Introduction

Corbado Connect provides automatic passkey backup functionality to ensure your authentication data is secure and portable. Our system automatically creates daily backups of all passkeys stored in your project, saving them as compressed CSV files in Amazon S3.

### 1.1. Key Features

- **Automated Daily Backups**: Passkeys are automatically backed up once per day as gzipped CSV files
- **Secure Storage**: Backups are stored in Amazon S3 with enterprise-grade security
- **Easy Access**: Download backup files directly from the Corbado Management Console
- **Data Portability**: Use exported passkeys to migrate to your own authentication system if needed
- **Migration Support**: Complete passkey data export enables seamless transition away from Corbado Connect

### 1.2. Use Cases

The passkey export feature is particularly useful for:

- **Data Sovereignty**: Maintain complete control over your authentication data
- **Compliance Requirements**: Meet regulatory requirements for data backup and retention
- **Migration Planning**: Prepare for potential migration to self-hosted authentication systems
- **Disaster Recovery**: Ensure business continuity with secure offsite backups
- **Audit Trails**: Maintain historical records of passkey registrations and usage

<Note>
Passkey export must be activated per project by the Corbado support team. Contact our support team to enable this feature for your project.
</Note>

## 2. CSV File Format

- explain CVS fields
- use markdown table
- use the following fields

"credentialId",
"projectId",
"userId",
"externalUserId",
"credentialId",
"publicKey",
"authenticatorSignCount",
"authenticatorAaguid",
"authenticatorAttachment",
"backupEligible",
"backupState",
"transports",
"attestationFormat",
"attestationResponse",
"created",
"status",

- the table should have a field column, a description column and a encoding column
- the encoding column contains special encodings for some fields:
    - credentialId
    - publicKey
    - attestationResponse
- see encoding is base64 url with padding (add RFC and link to it)
- add mintlify note with download link to example csv file

## 3. Import

- next step is to import the exported passkeys into your own system
- we provide all relevant fields for the major frameworks
- as a proof-of-concept we implemented an import for JavaScript/TypeScript SimpleWebAuthn library example (link word example to index.ts)
- show following code:

```javascript
function loadCredentialsFromCSV(): void {
  try {
    const csvPath = path.join(__dirname, '2025-09-15.csv');
    const csvContent = fs.readFileSync(csvPath, 'utf-8');

    const records = parse(csvContent, {
      columns: true,
      skip_empty_lines: true,
    }) as CSVRecord[];

    for (const record of records) {
      if (record.status === 'active') {
        // Parse base64url encoded fields
        const credentialId = Buffer.from(record.credentialId, 'base64url');
        const publicKey = Buffer.from(record.publicKey, 'base64url');

        // Parse transports
        const transports = record.transports.split(';').map((t: string) => t.trim()) as AuthenticatorTransport[];

        const credential: WebAuthnCredential = {
          id: credentialId.toString('base64url'),
          publicKey: publicKey,
          counter: parseInt(record.authenticatorSignCount, 10),
          transports: transports,
        };

        // Add credential to the default user
        const user = inMemoryUserDB[loggedInUserId];
        if (user) {
          // Check if credential already exists by comparing credential IDs
          const existingCred = user.credentials.find(cred =>
            cred.id === credential.id
          );

          if (!existingCred) {
            user.credentials.push(credential);
            console.log(`Loaded credential from CSV: ${record.credentialId}`);
          }
        }
      }
    }

    console.log(`Loaded ${inMemoryUserDB[loggedInUserId].credentials.length} credentials from CSV`);
  } catch (error) {
    console.warn('Could not load credentials from CSV:', error);
  }
}
```

- on startup of the example, you must call `loadCredentialsFromCSV` to load the example passkey file `2025-09-15.csv`