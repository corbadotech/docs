import { useState, useCallback } from 'react';

export const ArchitectureDiagram = () => {
  const visualize = true;
  const imageSrc = '/images/corbado-connect/architecture.png';
  const areas = [
    {
        id: 'G2',
        title: 'Customer Web Application',
        rect: { top: '8%', left: '10%', width: '20%', height: '80%' },
        text: "The frontend of the customer's application where users interact with the UI components.",
    },
    {
        id: 'G3',
        title: 'Customer Backend',
        rect: { top: '8%', left: '32%', width: '15%', height: '80%' },
        text: "The customer's backend server that handles business logic and communicates with the user database and Corbado.",
    },
    {
        id: 'G4',
        title: 'Customer User Database',
        rect: { top: '8%', left: '49%', width: '15%', height: '80%' },
        text: "The customer's existing identity provider or user database where user information is stored.",
    },
  ];

  const [activeArea, setActiveArea] = useState(null);

  const handleMouseEnter = useCallback((area) => {
    setActiveArea(area);
  }, []);

  const handleMouseLeave = useCallback(() => {
    setActiveArea(null);
  }, []);

  return (
    <div style={{ fontFamily: 'sans-serif' }}>
      <div style={{ position: 'relative', display: 'inline-block' }}>
        <img src={imageSrc} alt="Architecture Diagram" style={{ display: 'block', width: '100%' }} />
        {areas.map(area => (
          <div
            key={area.id}
            title={area.title}
            style={{
              position: 'absolute',
              top: area.rect.top,
              left: area.rect.left,
              width: area.rect.width,
              height: area.rect.height,
              cursor: 'pointer',
              backgroundColor: visualize || activeArea === area ? 'rgba(0, 123, 255, 0.2)' : 'transparent',
              border: visualize || activeArea === area ? '2px solid rgba(0, 123, 255, 0.5)' : 'none',
              transition: 'background-color 0.2s, border 0.2s',
            }}
            onMouseEnter={() => handleMouseEnter(area)}
            onMouseLeave={handleMouseLeave}
          />
        ))}
      </div>
      <div style={{ marginTop: '16px', padding: '16px', border: '1px solid #ddd', borderRadius: '4px', minHeight: '100px', backgroundColor: '#f9f9f9' }}>
        {activeArea ? (
          <div>
            <h4 style={{ marginTop: 0, marginBottom: '8px' }}>{activeArea.title}</h4>
            <p style={{ margin: 0 }}>{activeArea.text}</p>
          </div>
        ) : (
          <p style={{ margin: 0, color: '#666' }}>Hover over a region in the diagram to get more information.</p>
        )}
      </div>
    </div>
  );
};
