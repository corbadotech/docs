import { useState, useCallback } from 'react';

export const ArchitectureDiagram = () => {
  const visualize = true;
  const imageSrc = '/images/corbado-connect/architecture.png';
  const areas = [
    {
        id: '1',
        title: 'Customer Environment',
        rect: { top: '7%', left: '16%', width: '5%', height: '5%' },
        text: "todo <a href=\"/corbado-connect-new/overview/welcome.mdx\">test</a>",
    },
    {
        id: '2',
        title: 'Customer Web Application',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '3',
        title: 'Customer Frontend',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '4',
        title: 'User sign-up flow',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '5',
        title: 'User login flow',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '6',
        title: 'Passkey UI',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '7',
        title: 'Customer Backend',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '8',
        title: 'Customer IdP/CIAM',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '9',
        title: 'Corbado Environment',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '10',
        title: 'Corbado Frontend API',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '11',
        title: 'Corbado Backend API',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '12',
        title: 'Corbado User Database',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
    {
        id: '13',
        title: 'Corbado Actions',
        rect: { top: '12%', left: '22%', width: '5%', height: '5%' },
        text: "todo",
    },
  ];

  const [activeArea, setActiveArea] = useState(null);

  const handleClick = useCallback((area) => {
    setActiveArea(prev => prev && prev.id === area.id ? null : area);
  }, []);

  return (
    <div style={{ fontFamily: 'sans-serif', border: '2px solid #eee', borderRadius: '12px', overflow: 'hidden', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)' }}>
      <div style={{ position: 'relative', display: 'inline-block' }}>
        <img src={imageSrc} alt="Architecture Diagram" style={{ display: 'block', width: '100%' }} />
        {areas.map(area => (
          <div
            key={area.id}
            title={area.title}
            style={{
              position: 'absolute',
              top: area.rect.top,
              left: area.rect.left,
              width: area.rect.width,
              height: area.rect.height,
              cursor: 'pointer',
              backgroundColor: visualize || activeArea === area ? 'rgba(0, 123, 255, 0.2)' : 'transparent',
              border: visualize || activeArea === area ? '2px solid rgba(0, 123, 255, 0.5)' : 'none',
              transition: 'background-color 0.2s, border 0.2s',
            }}
            onClick={() => handleClick(area)}
          />
        ))}
      </div>
      <div style={{ padding: '16px', minHeight: '100px', backgroundColor: '#fff' }}>
        {activeArea ? (
          <div>
            <h4 style={{ marginTop: 0, marginBottom: '8px' }}>{activeArea.title}</h4>
            <p style={{ margin: 0 }}>{activeArea.text}</p>
          </div>
        ) : (
          <p style={{ margin: 0, color: '#666' }}>Click on a region in the diagram to get more information.</p>
        )}
      </div>
    </div>
  );
};
